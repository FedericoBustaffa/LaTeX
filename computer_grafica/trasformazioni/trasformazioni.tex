\section{Trasformazioni geometriche}
Una \textbf{trasformazione geometrica} \`e una funzione che mappa punti in punti e vettori
in vettori. Quando parliamo vogliamo \emph{trasformare} un oggetto intendiamo l'applicazione
della stessa trasformazione a tutti i punti dell'oggetto.

Per semplicit\`a faremo riferimento a punti nel piano bidimensionale
\[ p = \begin{bmatrix} p_x \\ p_y \end{bmatrix} \]

\subsection{Traslazione}
Se vogliamo traslare un punto $p$ abbiamo bisogno di un vettore $v$ che ci indichi di quando
traslare le sue coordinate.
\[
	T_v(p) = p + v =
	\begin{bmatrix}
		p_x \\ p_y
	\end{bmatrix} +
	\begin{bmatrix}
		v_x \\ v_y
	\end{bmatrix} =
	\begin{bmatrix}
		p_x + v_x \\ p_y + v_y
	\end{bmatrix}
\]
La traslazione \`e indipendente dalle coordinate del punto.

\subsection{Scalatura}
Utile per cambiare la dimensione di un oggetto. Per ottenere questa trasformazione si
moltiplicano tutti i punti della figura per un fattore di scalatura.
\[
	S_{s_x, s_y}(p) =
	\begin{bmatrix}
		s_x \cdot p_x \\
		s_y \cdot p_y
	\end{bmatrix}
\]
Se $s_x = s_y$ allora la scalatura \`e \textbf{uniforme o isotropica} (le proporzioni
dell'oggetto non cambiano). Altrimenti si dice che la scalatura \`e
\textbf{non uniforme o anisotropica}.

\subsection{Rotazione}
Utile per ruotare di un angolo $\theta$ un punto rispetto all'origine. Per
effettuare una rotazione abbiamo bisogno di convertire le coordinate cartesiane del
nostro punto in coordinate polari.
\[
	p = \begin{bmatrix}
		p_x \\ p_y
	\end{bmatrix} =
	\begin{bmatrix}
		\rho \cos(\phi) \\
		\rho \sin(\phi)
	\end{bmatrix}\]
Se volessi quindi, ruotare il punto $p$ di un angolo $\theta$ rispetto a dove si trova
dovrei svolgere un'operazione di questo tipo:
\[
	R_\theta(p) =
	\begin{bmatrix}
		\rho \cos(\phi + \theta) \\
		\rho \sin(\phi + \theta)
	\end{bmatrix}
\]
Per semplificare i calcoli possiamo ricordarci che
\begin{gather*}
	\cos(\phi + \theta) = \cos(\phi) \cos(\theta) - \sin(\phi) \sin(\theta) \\
	\sin(\phi + \theta) = \sin(\theta) \cos(\phi) + \sin(\phi) \cos(\theta)
\end{gather*}
Posso quindi riscrivere la funzione di rotazione come
\begin{gather*}
	R_\theta(p) =
	\begin{bmatrix}
		\rho [ \cos(\phi) \cos(\theta) - \sin(\phi) \sin(\theta) ] \\
		\rho [ \sin(\theta) \cos(\phi) + \sin(\phi) \cos(\theta) ]
	\end{bmatrix} \\
	R_\theta(p) = \begin{bmatrix}
		p_x \cos(\theta) - p_y \sin(\theta) \\
		p_x \sin(\theta) + p_y \cos(\theta)
	\end{bmatrix}
\end{gather*}
In questo modo non riesco a modificare il centro di rotazione in nessun modo e nemmeno
ampliare il raggio della rotazione. Per questo secondo problema si potrebbe optare
per una traslazione nella direzione del raggio di opportuna intensit\`a.

\subsection{Strappo}
\`E una traslazione di ognuno dei punti lungo un asse in modo proporzionale al valore
dell'altro.
\[
	Sh_{k, y}(p) =
	\begin{bmatrix}
		p_x + k \cdot p_y \\
		p_y
	\end{bmatrix}
\]
Si pu\`o comunque ottenere come combinazione di rotazioni e scalature non uniformi.

\section{Matrice di trasformazione}
Per rendere sia la notazione che il codice pi\`u compatti \`e utile introdurre il concetto
di \textbf{matrice di trasformazione}. Quello che facciamo \`e semplicemente accorpare le
varie equazioni che definiscono la trasformazione in un'unica matrice.

Per esempio consideriamo il generico punto $p$ nello spazio bidimensionale. Una generica
trasformazione mi far\`a ottenere il punto $p'$ in questo modo:
\begin{gather*}
	p'_x = a_{xx} p_x + a_{xy} p_y \\
	p'_y = a_{yx} p_x + a_{yy} p_y
\end{gather*}
Dove i vari $a$ sono i coefficienti che dipendono dal tipo di trasformazione che si
vuole applicare.

Posso usare la \emph{matrice di trasformazione} per scrivere:
\begin{gather*}
	p' = \begin{bmatrix}
		a_{xx} & a_{xy} \\
		a_{yx} & a_{yy}
	\end{bmatrix} \cdot p
\end{gather*}
Precedentemente abbiamo ottenuto che la rotazione di un punto $p$ nello spazio bidimensionale
di un angolo $\theta$ \`e espressa tramite la formula
\[
	R_\theta(p) = \begin{bmatrix}
		p_x \cos(\theta) - p_y \sin(\theta) \\
		p_x \sin(\theta) + p_y \cos(\theta)
	\end{bmatrix}
\]
Da qui ne ricaviamo che la generica \emph{matrice di rotazione} \`e espressa come segue
\[
	R_\theta = \begin{bmatrix}
		\cos(\theta) & -\sin(\theta) \\
		\sin(\theta) & \cos(\theta)
	\end{bmatrix}
\]
Ragionamento analogo per la \emph{matrice di scalatura}, espressa in questo modo
\[
	S_{s_x, s_y} = \begin{bmatrix}
		s_x & 0   \\
		0   & s_y
	\end{bmatrix}
\]
Per quanto riguarda invece la traslazione non \`e cos\`e immediata la conversione dato
che la traslazione non \`e una combinazione lineare delle coordinate (non dipende da dove \`e
il punto), dipende solo dal vettore di traslazione.

Conviene quindi passare alle \textbf{coordinate omogenee}, ovvero si aggiunge un 1 alle
coordinate del punto (se in 2D sar\`a come la terza coordinata, se in 3D sar\`a al posto
della quarta) e uno 0 alle coordinate del vettore.

Se abbiamo ad esempio il punto $p$ e il vettore $v$, entrambi nello spazio bidimensionale,
dovremo considerarli come segue
\[
	p = \begin{bmatrix}
		p_x \\ p_y \\ 1
	\end{bmatrix} \quad
	v = \begin{bmatrix}
		v_x \\ v_y \\ 0
	\end{bmatrix}
\]
Possiamo ora scrivere la nostra \emph{matrice di traslazione} in questo modo
\[
	T_v = \begin{bmatrix}
		1 & 0 & v_x \\
		0 & 1 & v_y \\
		0 & 0 & 1
	\end{bmatrix}
\]
Se vorr\`o applicare la traslazione al punto $p$ dovr\`o moltiplicare tale matrice per il punto
in formato omogeneo.

In generale, ho una \emph{matrice di trasformazione} che posso usare per tutte le trasformazioni
scritta in questo modo:
\[
	\begin{bmatrix}
		a_{xx} & a_{xy} & v_x \\
		a_{yx} & a_{yy} & v_y \\
		0      & 0      & 1
	\end{bmatrix}
\]

\subsection{Composizione di trasformazioni}
Per ottenere effetti diversi e particolari le singole trasformazioni non bastano. Si ricorrer\`a
spesso ad una combinazione di esse, per farlo devo moltiplicare tra loro le matrici di
trasformazione che sto utilizzando.

Se considero ad esempio le tre trasformazioni di base (traslazione, rotazione e scalatura) la
matrice di trasformazione finale sar\`a ottenuta dal prodotto delle matrici associate.
\[ M = T \cdot R \cdot S \]
Se voglio quindi applicare pi\`u trasformazioni al punto $p$, il punto $p'$ sar\`a ottenuto in
questo modo
\[ p' = T \cdot R \cdot S \cdot p \]
Tuttavia l'ordine con il quale si effettuano le moltiplicazioni \`e da tenere di conto.
Nella formula vista sopra il punto $p$ viene prima traslato poi ruotato e infine scalato.
In generale non esiste un ordine corretto, tutto dipende dalla scena che vogliamo rappresebtare
e da quale vogliamo sia l'effetto finale.

Se avessimo una figura qualsiasi con centro nell'origine e volessimo applicare ad essa una
traslazione e una rotazione. A seconda dell'ordine con il quale vengono applicate le due
trasformazioni avremo due effetti molto diversi.

Se applicassi prima la traslazione e poi la rotazione, la figura verrebbe prima spostata e
poi ruotata intorno all'origine. Se applicassi prima la rotazione e poi la traslazione essa,
prima girerebbe su se stessa e poi verrebbe traslata.

Vediamo ora una esempio di quanto appena detto usando un quadrato
\begin{center}
	\begin{tikzpicture}
		\filldraw[color=red, fill=red!60, very thick]
		(-3.5, -0.5) --
		(-3.5, 0.5) --
		(-2.5, 0.5) --
		(-2.5, -0.5) --
		cycle;
	\end{tikzpicture}
\end{center}


\subsubsection{Cambiare il centro di rotazione}

\section{Trasformazioni affini}
Una trasformazione si dice \textbf{affine} se e solo se:
\begin{itemize}
	\item Preserva la collinearit\`a, ovvero se due o pi\`u punti si trovano su una retta, dopo
	      la trasformazione si troveranno sempre su di una retta (anche diversa da quella
	      iniziale).
	\item Preserva il rapporto tra le distanze tra i punti sulla stessa retta e tra punti su
	      rette parallele.
	\item Preserva il parallelismo tra le rette: se ho insiemi di punti su rette distinte e
	      parallele, dopo la trasformazione si troveranno ancora su rette parallele (anche
	      diverse da quelle di partenza).
\end{itemize}
Traslazione, rotazione e scalatura sono trasformazioni \emph{affini}.
